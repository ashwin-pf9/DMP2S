!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e10f4c52-40de-43b3-9012-ef6bd0bb23b6",e._sentryDebugIdIdentifier="sentry-dbid-e10f4c52-40de-43b3-9012-ef6bd0bb23b6")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5969],{8660:function(e){e.exports=function(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var s=e[a];t(r,s,n(s),e)}return r}},3792:function(e,t,n){var r=n(61701);e.exports=function(e,t,n,a){return r(e,function(e,r,o){t(a,e,n(e),o)}),a}},17325:function(e,t,n){var r=n(8660),a=n(3792),o=n(55833),s=n(55589);e.exports=function(e,t){return function(n,i){var l=s(n)?r:a,d=t?t():{};return l(n,e,o(i,2),d)}}},50663:function(e,t,n){var r=n(17325)(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});e.exports=r},43745:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql/templates",function(){return n(16261)}])},53114:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var r=n(32691),a=n(52983);function o(){let{replace:e=!0,arrayKeys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=JSON.stringify(t),o=(0,a.useMemo)(()=>new Set(t),[n]),s=(0,r.useRouter)(),i=(0,a.useMemo)(()=>Object.fromEntries(Object.entries(s.query).map(e=>{let[t,n]=e;return o.has(t)?Array.isArray(n)?[t,n]:[t,[n]]:[t,n]})),[o,s.query]),l=(0,a.useCallback)(t=>{let n="function"==typeof t?t(i):t,r=Object.fromEntries(Object.entries({...i,...n}).filter(e=>{let[,t]=e;return!!t}));(e?s.replace:s.push)({pathname:s.pathname,query:r},void 0,{shallow:!0,scroll:!1})},[s,i,e]);return[i,l]}},19276:function(e,t,n){"use strict";var r=n(97458),a=n(62234),o=n(52983);t.Z=e=>{let{title:t,description:n,sql:s,onClick:i}=e,[l,d]=(0,o.useState)(!1);return(0,r.jsx)(a.Z,{title:t,loading:l,onClick:()=>void(d(!0),i(s,t)),description:n,className:"xl:h-48 p-6","data-sentry-element":"CardButton","data-sentry-component":"SQLCard","data-sentry-source-file":"SQLCard.tsx"})}},31584:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(97458),a=n(12436),o=n(79398),s=n(96142),i=n(21853),l=n(73385),d=n(68),u=n(77270),c=n(71042),m=n(83145),f=n.n(m),x=n(32691),p=n(52983),h=n(37756),g=n(65092),y=n(90839),v=n(3503),b=n(34730),j=()=>{let e=(0,x.useRouter)(),[t,n]=(0,p.useState)(!1),{ref:o}=(0,a.UO)();return(0,r.jsxs)("div",{className:"h-14 w-full flex flex-row md:hidden","data-sentry-component":"MobileNavigationBar","data-sentry-source-file":"MobileNavigationBar.tsx",children:[(0,r.jsxs)("nav",{className:(0,g.cn)("group px-4 z-10 w-full h-14","border-b bg-dash-sidebar border-default shadow-xl","transition-width duration-200","hide-scrollbar flex flex-row items-center justify-between overflow-x-auto"),children:[(0,r.jsx)(f(),{href:h.Qy?"/projects":"/project/".concat(o),className:"flex items-center h-[26px] w-[26px] min-w-[26px]","data-sentry-element":"Link","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,r.jsx)("img",{alt:"Supabase",src:"".concat(e.basePath,"/img/supabase-logo.svg"),className:"absolute h-[26px] w-[26px] cursor-pointer rounded"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(v.av,{"data-sentry-element":"CommandMenuTrigger","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,r.jsx)("button",{className:(0,g.cn)("group","flex-grow h-[30px] rounded-md","p-2","flex items-center justify-between","bg-transparent border-none text-foreground-lighter","hover:bg-opacity-100 hover:border-strong hover:text-foreground-light","focus-visible:!outline-4 focus-visible:outline-offset-1 focus-visible:outline-brand-600","transition"),children:(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)(u.Z,{size:18,strokeWidth:2,"data-sentry-element":"Search","data-sentry-source-file":"MobileNavigationBar.tsx"})})})}),(0,r.jsx)("button",{title:"Menu dropdown button",className:(0,g.cn)((0,y.d)({type:"default"}),"flex lg:hidden border-default bg-surface-100/75 text-foreground-light rounded-md min-w-[30px] w-[30px] h-[30px] data-[state=open]:bg-overlay-hover/30"),onClick:()=>n(!0),children:(0,r.jsx)(c.Z,{size:18,strokeWidth:1,"data-sentry-element":"Menu","data-sentry-source-file":"MobileNavigationBar.tsx"})})]})]}),(0,r.jsx)(b.Z,{open:t,onOpenChange:n,"data-state":"expanded","data-sentry-element":"MobileSheetNav","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,r.jsx)(i.TZ,{"data-sentry-element":"SidebarContent","data-sentry-source-file":"MobileNavigationBar.tsx"})})]})},w=n(88971),N=e=>{let{children:t,showProductMenu:n}=e,{ref:u}=(0,a.UO)();return(0,r.jsx)(l.Hn,{defaultOpen:!1,"data-sentry-element":"SidebarProvider","data-sentry-component":"DefaultLayout","data-sentry-source-file":"DefaultLayout.tsx",children:(0,r.jsx)(w.Ml,{projectRef:u,"data-sentry-element":"ProjectContextProvider","data-sentry-source-file":"DefaultLayout.tsx",children:(0,r.jsx)(s.EA,{"data-sentry-element":"AppBannerContextProvider","data-sentry-source-file":"DefaultLayout.tsx",children:(0,r.jsxs)("div",{className:"flex flex-col h-screen w-screen",children:[(0,r.jsx)(o.l,{"data-sentry-element":"AppBannerWrapper","data-sentry-source-file":"DefaultLayout.tsx"}),(0,r.jsxs)("div",{className:"flex-shrink-0",children:[(0,r.jsx)(j,{"data-sentry-element":"MobileNavigationBar","data-sentry-source-file":"DefaultLayout.tsx"}),(0,r.jsx)(d.N,{showProductMenu:n,"data-sentry-element":"LayoutHeader","data-sentry-source-file":"DefaultLayout.tsx"})]}),(0,r.jsxs)("div",{className:"flex flex-1 w-full overflow-y-hidden",children:[(0,r.jsx)(i.YE,{"data-sentry-element":"Sidebar","data-sentry-source-file":"DefaultLayout.tsx"}),(0,r.jsx)("div",{className:"flex-grow h-full overflow-y-auto",children:t})]})]})})})})}},62234:function(e,t,n){"use strict";var r=n(97458),a=n(5295),o=n(91587),s=n(83145),i=n.n(s),l=n(52983),d=n(65092);t.Z=e=>{let t,{title:n,description:s,children:u,footer:c,url:m="",linkHref:f="",imgUrl:x,imgAlt:p,icon:h,className:g,loading:y=!1,fixedHeight:v=!0,hideChevron:b=!1,titleClass:j="",containerElement:w,...N}=e,C=m||f||N.onClick,k={},_=w&&l.isValidElement(w)?e=>(0,l.cloneElement)(w,{...e}):void 0;N.onClick?(t=null!=_?_:"button",k=N):f?(t=null!=_?_:i(),k={href:f,...N}):m?(t=null!=_?_:"a",k={href:m,...N}):(t=null!=_?_:"div",k=N);let S=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];C&&(S=[...S,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),v&&(S=[...S,"min-h-32 md:min-h-44"]);let M=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"mr-4 flex flex-col","data-sentry-component":"ImageContainer","data-sentry-source-file":"CardButton.tsx",children:t})},B=(0,r.jsxs)(r.Fragment,{children:[x&&(0,r.jsx)(M,{children:(0,r.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(x),alt:"".concat(p),width:"26"})}),h&&(0,r.jsx)(M,{children:h}),(0,r.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof n?(0,r.jsx)("h5",{className:"text-foreground pr-5 ".concat(j),children:n}):n,(u||s)&&(0,r.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:s}),(0,r.jsx)("div",{className:"w-full",children:u&&u})]}),c&&(0,r.jsx)("div",{className:"w-full !mt-auto",children:c})]}),C&&(0,r.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:y?(0,r.jsx)(a.Z,{className:"animate-spin"}):b?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(o.Z,{})})]});return(0,r.jsx)(t,{...k,className:(0,d.cn)(S,g),"data-sentry-element":"Container","data-sentry-component":"CardButton","data-sentry-source-file":"CardButton.tsx",children:B})}},16261:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(97458),a=n(198),o=n(50663),s=n.n(o),i=n(32691),l=n(34549),d=n(12436),u=n(62354),c=n(88971),m=n(82288),f=n(90817),x=n(75541),p=n(45536),h=n(81514),g=n(49825),y=n(76689),v=n(19276),b=()=>{let e=(0,i.useRouter)(),{ref:t}=(0,d.UO)(),n=(0,x.l)(),{profile:o}=(0,h.Un)(),{project:b}=(0,c.d2)(),[j]=s()(u.o,{type:"template"}),w=(0,g.B0)(),N=(0,f.Xo)(a.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==o?void 0:o.id},subject:{id:null==o?void 0:o.id}}),{mutate:C}=(0,m.a)(),k=async(n,r)=>{if(!t)return console.error("Project ref is required");if(!b)return console.error("Project is required");if(!o)return console.error("Profile is required");if(!N)return(0,l.Am)("Your queries will not be saved as you do not have sufficient permissions");try{let a=(0,y.wI)({id:(0,p.k$)(),name:r,sql:n,owner_id:null==o?void 0:o.id,project_id:null==b?void 0:b.id});w.addSnippet({projectRef:t,snippet:a}),w.addNeedsSaving(a.id),e.push("/project/".concat(t,"/sql/").concat(a.id))}catch(e){l.Am.error("Failed to create new query: ".concat(e.message))}};return(0,r.jsx)("div",{className:"block h-full space-y-8 overflow-y-auto p-4 md:p-6","data-sentry-component":"SQLTemplates","data-sentry-source-file":"SQLTemplates.tsx",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h1",{className:"text-foreground mb-3 text-xl",children:"Scripts"}),(0,r.jsx)("p",{className:"text-foreground-light text-sm",children:"Quick scripts to run on your database."}),(0,r.jsxs)("p",{className:"text-foreground-light text-sm",children:["Click on any script to fill the query box, modify the script, then click",(0,r.jsx)("span",{className:"text-code",children:"Run"}),"."]})]}),(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 ",children:j.map(e=>(0,r.jsx)(v.Z,{title:e.title,description:e.description,sql:e.sql,onClick:(e,r)=>{var a;k(e,r),C({action:"sql_editor_template_clicked",properties:{templateName:r},groups:{project:null!=t?t:"Unknown",organization:null!==(a=null==n?void 0:n.slug)&&void 0!==a?a:"Unknown"}})}},e.title))})]})})},j=n(31584),w=n(5294);let N=()=>(0,r.jsx)(b,{"data-sentry-element":"SQLTemplates","data-sentry-component":"SqlEditorWelcome","data-sentry-source-file":"templates.tsx"});N.getLayout=e=>(0,r.jsx)(j.Z,{children:(0,r.jsx)(w.Z,{title:"SQL",children:e})});var C=N},3503:function(e,t,n){"use strict";n.d(t,{B_:function(){return y},_f:function(){return w},aG:function(){return g},av:function(){return j}});var r=n(97458),a=n(50497),o=n(71770),s=n(52983),i=n(9060),l=n(12436),d=n(22114),u=n(65092),c=n(47482),m=n(90839),f=n(36210),x=n(36406),p=n(53496),h=n(38788);function g(e){let{className:t}=e,n=(0,x.Wo)(),o=(0,x.yg)();if(n)return(0,r.jsxs)("button",{className:(0,u.cn)("p-2 bg-overlay flex items-center gap-2 text-xs text-foreground-muted",t),onClick:o,"data-sentry-component":"Breadcrumb","data-sentry-source-file":"CommandMenu.tsx",children:[(0,r.jsx)(a.Z,{width:12,height:12,"data-sentry-element":"ArrowLeft","data-sentry-source-file":"CommandMenu.tsx"}),n.name]})}let y=(0,s.forwardRef)((e,t)=>{let{children:n,className:a,...o}=e;return(0,r.jsx)(c.mY,{ref:t,className:(0,u.cn)("h-full w-full flex flex-col overflow-hidden","[&_[cmdk-group]]:px-2 [&_[cmdk-group]]:!bg-transparent [&_[cmdk-group-heading]]:!bg-transparent [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-border-stronger [&_[cmdk-input]]:h-12","[&_[cmdk-item]_svg]:h-5","[&_[cmdk-item]_svg]:w-5","[&_[cmdk-item]_svg]:stroke-1","[&_[cmdk-input-wrapper]_svg]:h-5","[&_[cmdk-input-wrapper]_svg]:w-5","[&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0",a),...o,children:n})});function v(e){let{resetErrorBoundary:t}=e;return(0,r.jsx)("div",{className:(0,u.cn)("min-h-64","flex items-center justify-center"),"data-sentry-component":"CommandError","data-sentry-source-file":"CommandMenu.tsx",children:(0,r.jsxs)("div",{className:"p-10 flex flex-col items-center gap-6 mt-4",children:[(0,r.jsx)(o.Z,{strokeWidth:1.5,size:40,"data-sentry-element":"AlertTriangle","data-sentry-source-file":"CommandMenu.tsx"}),(0,r.jsx)("p",{className:"text-lg text-center",children:"Sorry, looks like we're having some issues with the command menu!"}),(0,r.jsx)("p",{className:"text-sm text-center",children:"Please try again in a bit."}),(0,r.jsx)(m.z,{size:"tiny",type:"secondary",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"CommandMenu.tsx",children:"Try again?"})]})})}function b(e){let{children:t}=e,n=(0,x.EB)();return n?(0,r.jsx)(n,{"data-sentry-element":"PageComponent","data-sentry-component":"PageSwitch","data-sentry-source-file":"CommandMenu.tsx"}):(0,r.jsx)(y,{"data-sentry-element":"CommandWrapper","data-sentry-component":"PageSwitch","data-sentry-source-file":"CommandMenu.tsx",children:t})}function j(e){let{children:t}=e,n=(0,h.Cc)(),r=(0,h.FX)(),a=s.Children.only(t);return a&&(0,s.isValidElement)(a)?(0,s.cloneElement)(a,{onClick:()=>{var e,t;r(!n),null===(e=(t=a.props).onOpen)||void 0===e||e.call(t,!n)},"aria-haspopup":"dialog","aria-expanded":n,"aria-controls":"command-menu-dialog-content",className:(0,u.cn)("h-10 px-4 py-2","inline-flex items-center justify-center","whitespace-nowrap","rounded-md border border-input bg-background","text-sm font-medium","hover:bg-accent hover:text-accent-foreground","ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","transition-colors",a.props.className)}):null}function w(e){let{children:t,trigger:n}=e,a=(0,h.Cc)(),o=(0,h.FX)(),c=(0,l.Gc)("sm"),m=(0,h.Qd)(),g=(0,x.Wo)(),y=(0,x.yg)(),j=(0,p.a)(),w=(0,p.A)(),{ref:N}=function(e){let{toggleOpen:t}=e,{ref:n,handleTouchStart:r,handleTouchMove:a,handleTouchEnd:o}=(0,d.Z)({onClose:t}),i=(0,h.Gk)(),l=(0,s.useMemo)(()=>({handleTouchStart:r,handleTouchMove:a,handleTouchEnd:o}),[r,a,o]);return(0,s.useEffect)(()=>{i(l)},[l]),{ref:n}}({toggleOpen:()=>o(!a)});return(0,r.jsxs)(f.Vq,{open:a,onOpenChange:o,"data-sentry-element":"Dialog","data-sentry-component":"CommandMenu","data-sentry-source-file":"CommandMenu.tsx",children:[n,(0,r.jsx)(f.cZ,{id:"command-menu-dialog-content",hideClose:!0,forceMount:!0,ref:N,onOpenAutoFocus:e=>c&&e.preventDefault(),onInteractOutside:()=>o(!1),onEscapeKeyDown:e=>(e.preventDefault(),j?w(""):g?y():o(!1)),size:m,className:(0,u.cn)("relative flex flex-col my-0 mx-auto rounded-t-lg overflow-hidden","h-[85dvh] mt-[15vh] md:max-h-[500px] md:mt-0 left-0 bottom-0 md:bottom-auto","!animate-in !slide-in-from-bottom-[85%] !duration-300","data-[state=closed]:!animate-out data-[state=closed]:!slide-out-to-bottom","!slide-in-from-left-[0%] :!slide-in-from-top-[0%]","!slide-out-to-left-[0%] !slide-out-to-top-[0%]","md:data-[state=open]:!slide-in-from-bottom-[0%] md:data-[state=closed]:!slide-out-to-bottom-[0%]","md:data-[state=open]:!zoom-in-95 md:data-[state=closed]:!zoom-out-95"),dialogOverlayProps:{className:(0,u.cn)("overflow-hidden flex data-closed:delay-100")},"data-sentry-element":"DialogContent","data-sentry-source-file":"CommandMenu.tsx",children:(0,r.jsx)(i.SV,{FallbackComponent:v,"data-sentry-element":"ErrorBoundary","data-sentry-source-file":"CommandMenu.tsx",children:(0,r.jsx)(b,{"data-sentry-element":"PageSwitch","data-sentry-source-file":"CommandMenu.tsx",children:t})})})]})}y.displayName=c.mY.displayName},19540:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(97458),a=n(52983),o=n(68985),s=n(11499);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function l(e){let{validate:t,...n}=e,[l,d]=(0,a.useReducer)(i,null),u=(0,o.TA)({validateOnBlur:!0,...n,validationSchema:n.validationSchema,initialValues:n.initialValues,onSubmit:n.onSubmit,validate:t||function(){return l}});return(0,r.jsx)("form",{id:n.id,name:n.name,onSubmit:u.handleSubmit,className:n.className,style:n.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,r.jsx)(s.o,{values:u.values,errors:u.errors,formContextOnChange:u.handleChange,handleBlur:u.handleBlur,touched:u.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:n.children({errors:u.errors,touched:u.touched,isSubmitting:u.isSubmitting,isValidating:u.isValidating,submitCount:u.submitCount,initialValues:u.initialValues,values:u.values,handleReset:u.handleReset,resetForm:u.resetForm,setFieldValue:u.setFieldValue})})})}},36406:function(e,t,n){"use strict";n.d(t,{EB:function(){return c},Qy:function(){return p},SL:function(){return m},Wo:function(){return u},yg:function(){return f}});var r=n(85466),a=n.n(r),o=n(52983),s=n(34653),i=n(48736),l=n(49160),d=n(53496);let u=()=>{let{pagesState:e}=(0,i.D)(),{commandPages:t,pageStack:n}=(0,s.R)(e),r=n.at(-1);return(0,o.useMemo)(()=>r&&t[r]?{...t[r],name:r}:void 0,[t,r])},c=()=>{let e=u();if(e&&(0,l.sG)(e))return e.component},m=()=>{let{pagesState:e}=(0,i.D)(),t=(0,d.A)();return function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.appendPageStack(n),r||t("")}},f=()=>{let{pagesState:e}=(0,i.D)(),{popPageStack:t}=(0,s.R)(e);return t},x=[],p=function(e,t){let{deps:n=x,enabled:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{pagesState:l}=(0,i.D)(),{registerNewPage:d}=(0,s.R)(l),u=(0,o.useRef)(n),c=(0,o.useRef)(r),m=(0,o.useRef)();(0,o.useMemo)(()=>{if(!a()(u.current,n)||c.current!==r){var o;null===(o=m.current)||void 0===o||o.call(m),m.current=r?d(e,t):void 0,u.current=n,c.current=r}},[d,e,t,n,r]),(0,o.useEffect)(()=>(m.current=r?d(e,t):void 0,()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.call(m)}),[])}},53496:function(e,t,n){"use strict";n.d(t,{A:function(){return s},a:function(){return o}});var r=n(34653),a=n(48736);let o=()=>{let{queryState:e}=(0,a.D)(),{query:t}=(0,r.R)(e);return t},s=()=>{let{queryState:e}=(0,a.D)(),{setQuery:t}=(0,r.R)(e);return t}}},function(e){e.O(0,[6665,7623,588,305,6402,1864,8703,1018,4975,4376,9621,3954,441,9911,3760,4637,8069,9344,7726,6739,4098,902,8985,7371,4847,1379,2047,9803,7414,1853,5294,9774,2888,179],function(){return e(e.s=43745)}),_N_E=e.O()}]);